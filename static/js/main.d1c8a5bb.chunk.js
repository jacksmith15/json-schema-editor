(this["webpackJsonpjson-schema-editor"]=this["webpackJsonpjson-schema-editor"]||[]).push([[0],{69:function(e,t,a){e.exports=a(81)},79:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(20),c=a.n(r),u=a(16),i=a(88),m=a(89),o=a(98),s=a(99),h=a(14),p=a(55),d=a(56),f=a(57),v=a(58),y=a(59),E=a(53),b=a(36);var g=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"union",value:function(e){return new Set([].concat(Object(h.a)(this),Object(h.a)(e)))}},{key:"intersection",value:function(e){return new Set(Object(h.a)(this).filter((function(t){return e.has(t)})))}},{key:"difference",value:function(e){return new Set(Object(h.a)(this).filter((function(t){return!e.has(t)})))}}]),a}(Object(y.a)(Set));function S(e,t){var a={};for(var n in t)e(n)&&(a[n]=t[n]);return a}function j(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object.assign.apply(Object,[{}].concat(t))}var O=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this.length)return e;try{var a=function(e,t){return e[t]},n=this.segments.reduce(a,e);return"undefined"===typeof n?t:n}catch(l){return t}}},{key:"set",value:function(e,t){var a=Object(b.cloneDeep)(e),n=a;if(!this.length)return t;var l,r=Object(E.a)(this.segments.slice(0,-1));try{for(r.s();!(l=r.n()).done;){var c=l.value;c in n||(n[c]={}),n=n[c]}}catch(u){r.e(u)}finally{r.f()}return n[this.segments.slice(-1)[0]]=t,a}},{key:"remove",value:function(e){var t=Object(b.cloneDeep)(e),a=t;if(this.length){var n,l=Object(E.a)(this.segments.slice(0,-1));try{for(l.s();!(n=l.n()).done;){var r=n.value;if(!(r in a))return t;a=a[r]}}catch(c){l.e(c)}finally{l.f()}return delete a[this.segments.slice(-1)[0]],t}}},{key:"segments",get:function(){return this.split(".").filter(Boolean)}},{key:"depth",get:function(){return this.segments.length}}],[{key:"join",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new a(t.filter(Boolean).join("."))}}]),a}(Object(y.a)(String)),k=a(92),w=a(96),V=a(93),C=a(54),x=a(87),N=a(43),M=a(64),A=a(90),K=a(91);function q(e){var t=l.a.useState(""),a=Object(u.a)(t,2),n=a[0],r=a[1],c=l.a.useState(null),i=Object(u.a)(c,2),m=i[0],s=i[1],h=new O(e.path).get(e.schema).properties,p=[],d=function(t){p.push(l.a.createElement(B,{key:t,property:t,setSchemaValue:e.setSchemaValue,delSchemaValue:e.delSchemaValue,schema:e.schema,path:e.path,onClick:function(){s(m!==t?t:null)}}))};for(var f in h)d(f);return l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",null,"Properties"),l.a.createElement(o.a,{activeKey:m},p),l.a.createElement("div",{class:"mt-3"}),l.a.createElement(w.a.Group,{onChange:function(e){return r(e.target.value)},className:"form-inline"},l.a.createElement(x.a,null,l.a.createElement(w.a.Control,{type:"text",placeholder:"Enter property name here...",value:n}),l.a.createElement(x.a.Append,null,l.a.createElement(N.a,{onClick:function(){n.length&&e.setSchemaValue(O.join(e.path,"properties",n),{}),r("")}},"Add property")))))}function B(e){var t=e.property,a=new O(e.path).get(e.schema),n=a.required||[];return l.a.createElement(s.a,null,l.a.createElement(o.a.Toggle,{as:s.a.Header,variant:"link",eventKey:t,onClick:e.onClick},l.a.createElement(i.a,null,l.a.createElement(m.a,null,l.a.createElement(M.a,null,l.a.createElement("h5",null,l.a.createElement("i",null,t))),l.a.createElement(M.a,null,l.a.createElement(A.a,{toggle:!0,style:{float:"right"}},l.a.createElement(K.a,{type:"checkbox",checked:n.includes(t),onChange:function(a){return function(a){var l=[];(l=a?[].concat(Object(h.a)(n),[t]):n.filter((function(e){return e!==t}))).length?e.setSchemaValue(O.join(e.path,"required"),l):e.delSchemaValue(O.join(e.path,"required"))}(a.target.checked)},variant:n.includes(t)?"primary":"secondary"},"Required"),l.a.createElement(N.a,{variant:"danger",onClick:function(l){return function(){var l=O.join(e.path,"properties",t).remove(a),r=n.filter((function(e){return e!==t}));r.length?l.required=r:delete l.required,e.setSchemaValue(e.path,l)}()}},"Remove")))))),l.a.createElement(o.a.Collapse,{eventKey:t},l.a.createElement(s.a.Body,null,l.a.createElement(X,{setSchemaValue:e.setSchemaValue,delSchemaValue:e.delSchemaValue,schema:e.schema,path:O.join(e.path,"properties",t)}))))}var G={array:{minItems:{name:"Minimum items",type:"number",default:0},maxItems:{name:"Maximum items",type:"number",default:10},uniqueItems:{name:"Unique items",type:"checkbox",default:!0}},boolean:{},integer:{minimum:{name:"Minimum value",type:"number",default:0},maximum:{name:"Maximum value",type:"number",default:100},exclusiveMaximum:{name:"Exclusive maximum",type:"number",default:100},exclusiveMinimum:{name:"Exclusive minimum",type:"number",default:0},multipleOf:{name:"Multiple of",type:"number",default:2}},number:{minimum:{name:"Minimum value",type:"number",default:0},maximum:{name:"Maximum value",type:"number",default:10},exclusiveMaximum:{name:"Exclusive maximum",type:"number",default:10},exclusiveMinimum:{name:"Exclusive minimum",type:"number",default:0},multipleOf:{name:"Multiple of",type:"number",default:2}},null:{},object:{additionalProperties:{name:"Additional properties",type:"checkbox",default:!1},minProperties:{name:"Minimum properties",type:"number",default:0},maxProperties:{name:"Maximum properties",type:"number",default:10}},string:{format:{name:"Format",type:"text",default:""},pattern:{name:"Pattern",type:"text",default:""},minLength:{name:"Minimum length",type:"number",default:3},maxLength:{name:"Maximum length",type:"number",default:200}}};function T(e){var t=new O(e.path).get(e.schema),a=S((function(e){return!Object.keys(t).includes(e)}),j.apply(void 0,[{}].concat(Object(h.a)(Object.values(S((function(e){return t.type.includes(e)}),G))))));return Object.keys(a).length?l.a.createElement(w.a.Group,null,l.a.createElement(V.a,{id:e.path+".add-validation",title:"Add validation rule...",drop:"right"},Object.entries(a).map((function(a){return l.a.createElement(C.a.Item,{as:"button",onClick:function(){e.setSchemaValue(O.join(e.path,a[0]),t[a[0]]||a[1].default)}},a[1].name)})))):null}function F(e){for(var t=new O(e.path).get(e.schema),a=S((function(e){return Object.keys(t).includes(e)}),j.apply(void 0,[{}].concat(Object(h.a)(Object.values(G))))),n=[],r=0,c=Object.keys(a);r<c.length;r++){var u=c[r];n.push(l.a.createElement(I,{path:e.path,schema:e.schema,setSchemaValue:e.setSchemaValue,delSchemaValue:e.delSchemaValue,keyword:u}))}return l.a.createElement(l.a.Fragment,null,n)}function I(e){var t=new O(e.path).get(e.schema),a=j.apply(void 0,[{}].concat(Object(h.a)(Object.values(G))))[e.keyword];return l.a.createElement(w.a.Group,{name:e.keyword,key:e.keyword,onChange:function(t){var a="checkbox"===t.target.type?t.target.checked:t.target.value;e.setSchemaValue(O.join(e.path,e.keyword),function(e){var t=Object.assign.apply(Object,[{}].concat(Object(h.a)(Object.values(G))))[e].type;return function(e){return"number"===t?parseFloat(e):e}}(e.keyword)(a))}},l.a.createElement(w.a.Label,null,a.name),l.a.createElement(x.a,null,l.a.createElement(w.a.Control,{type:a.type,defaultValue:t[e.keyword],defaultChecked:!0===a.default}),l.a.createElement(x.a.Append,null,l.a.createElement(N.a,{variant:"danger",onClick:function(){return e.delSchemaValue(O.join(e.path,e.keyword))}},"Remove"))))}var P=a(95),R=a(97),H=a(94);function $(e){var t=null;return t=e.isRoot?l.a.createElement(w.a.Group,null,l.a.createElement(x.a,null,l.a.createElement(w.a.Control,{type:"text",placeholder:"Enter schema name here...",value:e.stagedSchemaName,onChange:function(t){return e.setStagedSchemaName(t.target.value)}}),l.a.createElement(x.a.Append,null,l.a.createElement(N.a,{onClick:e.handleAccept,disabled:!e.readyToAccept},"Accept")))):l.a.createElement(N.a,{onClick:e.handleAccept,disabled:!e.readyToAccept},"Accept"),l.a.createElement(P.a,{show:e.show,size:"lg","aria-labelledby":"contained-modal-title-vcenter",onHide:function(){e.setShow(!1)},centered:!0},l.a.createElement(P.a.Header,{closeButton:!0},l.a.createElement(P.a.Title,{id:"contained-modal-title-vcenter"},"Create schema")),l.a.createElement(P.a.Body,null,l.a.createElement(R.a,{activeKey:e.tab,onSelect:function(t){return e.setTab(t)}},function(e){return l.a.createElement(H.a,{eventKey:"reference",title:"Choose reference"},l.a.createElement("div",{class:"mt-3"}),l.a.createElement(w.a.Group,{className:"my-2"},l.a.createElement(w.a.Control,{as:"select",onChange:function(t){return e.setChoices(j(e.choices,{reference:t.target.value}))},defaultValue:""},l.a.createElement("option",{value:"",disabled:!0},"Select one.."),l.a.createElement("option",{value:"uuid"},"UUID"),l.a.createElement("option",{value:"even-number"},"Even Number"))))}({choices:e.choices,setChoices:e.setChoices}),function(e){return l.a.createElement(H.a,{eventKey:"type",title:"Create new"},l.a.createElement("div",{class:"mt-3"}),l.a.createElement(w.a.Group,{className:"my-2"},l.a.createElement(w.a.Control,{as:"select",multiple:!0,onChange:function(t){return e.setChoices(j(e.choices,{type:[].slice.call(t.target.selectedOptions).map((function(e){return e.value}))}))},value:e.choices.type},l.a.createElement("option",{value:"array"},"Array"),l.a.createElement("option",{value:"boolean"},"Boolean"),l.a.createElement("option",{value:"integer"},"Integer"),l.a.createElement("option",{value:"null"},"Null"),l.a.createElement("option",{value:"number"},"Number"),l.a.createElement("option",{value:"object"},"Object"),l.a.createElement("option",{value:"string"},"String"))))}({choices:e.choices,setChoices:e.setChoices}),function(e){return l.a.createElement(H.a,{eventKey:"composition",title:"Compose"},l.a.createElement("div",{class:"mt-3"}),l.a.createElement(w.a.Group,{className:"my-2"},l.a.createElement(w.a.Control,{as:"select",onChange:function(t){return e.setChoices(j(e.choices,{composition:t.target.value}))},defaultValue:""},l.a.createElement("option",{value:"",disabled:!0},"Select one.."),l.a.createElement("option",{value:"anyOf"},"Match Any"),l.a.createElement("option",{value:"allOf"},"Match All"),l.a.createElement("option",{value:"oneOf"},"Match One"),l.a.createElement("option",{value:"not"},"Not"))))}({choices:e.choices,setChoices:e.setChoices}))),l.a.createElement(P.a.Footer,null,t))}var D=function(e){var t=new O(e.path).get(e.schema).$ref.split("/").slice(-1)[0];return l.a.createElement(N.a,{variant:"info",disabled:!0},t)},J=function(e){var t=new O(e.path).get(e.schema).type;return l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",null,e.schemaName,t.map((function(e,t){return l.a.createElement(l.a.Fragment,{key:t}," ",l.a.createElement(k.a,{variant:"secondary"},e)," ")}))),l.a.createElement("h4",null,"Validation rules"),l.a.createElement(T,{path:e.path,schema:e.schema,setSchemaValue:e.setSchemaValue}),l.a.createElement(F,{setSchemaValue:e.setSchemaValue,delSchemaValue:e.delSchemaValue,schema:e.schema,path:e.path}),t.includes("object")?l.a.createElement(q,{path:e.path,schema:e.schema,setSchemaValue:e.setSchemaValue,delSchemaValue:e.delSchemaValue}):"")},L=function(e){return l.a.createElement("div",null,"Not implemented")},U=function(e){var t=!e.path.length,a=l.a.useState(!1),n=Object(u.a)(a,2),r=n[0],c=n[1],i=l.a.useState(t?"type":"reference"),m=Object(u.a)(i,2),o=m[0],s=m[1],h=l.a.useState({reference:null,type:[],composition:null}),p=Object(u.a)(h,2),d=p[0],f=p[1],v=l.a.useState(e.schemaName),y=Object(u.a)(v,2),E=y[0],b=y[1],g=(!t||E.length>0)&&("composition"===o&&null!==d.composition||"reference"===o&&null!==d.reference||"type"===o&&d.type.length>0);return l.a.createElement(w.a.Group,null,l.a.createElement(N.a,{onClick:function(){return c(!0)},block:!0},"Create schema"),l.a.createElement($,{show:r,setShow:c,handleAccept:function(){t&&e.setSchemaName(E),"composition"===o&&null!==d.composition?e.setSchemaValue(O.join(e.path,d[o]),"not"===d[o]?{}:[]):"reference"===o&&null!==d.reference?e.setSchemaValue(O.join(e.path,"$ref"),"#/definitions/".concat(d[o])):"type"===o&&d[o].length&&e.setSchemaValue(O.join(e.path,"type"),d[o]),c(!1)},tab:o,setTab:s,choices:d,setChoices:f,stagedSchemaName:E,setStagedSchemaName:b,isRoot:t,readyToAccept:g}))},z=new g(["allOf","anyOf","oneOf","not"]);function W(e){var t=l.a.useState({}),a=Object(u.a)(t,2),n=a[0],r=a[1],c=l.a.useState(""),o=Object(u.a)(c,2),s=o[0],h=o[1];return l.a.createElement(i.a,null,l.a.createElement(m.a,null,l.a.createElement(X,{setSchemaValue:function(e,t){return r(new O(e).set(n,t))},delSchemaValue:function(e){return r(new O(e).remove(n))},schema:n,path:"",setSchemaName:h,schemaName:s})),l.a.createElement(m.a,null,l.a.createElement(Q,{schema:n})))}function Q(e){return l.a.createElement(i.a,null,l.a.createElement(o.a,null,l.a.createElement(s.a,null,l.a.createElement(o.a.Toggle,{as:s.a.Header,variant:"link",eventKey:"preview"},"Preview"),l.a.createElement(o.a.Collapse,{eventKey:"preview"},l.a.createElement("pre",null,JSON.stringify(e.schema,null,2))))))}function X(e){var t=function(e){return"$ref"in e?D:new g(e.keys).intersection(z).size?L:Object.keys(e).includes("type")?J:U}(new O(e.path).get(e.schema));return l.a.createElement(i.a,null,l.a.createElement(t,{setSchemaValue:e.setSchemaValue,delSchemaValue:e.delSchemaValue,schema:e.schema,path:e.path,setSchemaName:e.setSchemaName,schemaName:e.schemaName}))}a(79),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(80);c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[69,1,2]]]);
//# sourceMappingURL=main.d1c8a5bb.chunk.js.map